
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>instrument.utils &#8212; instrument</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=4ae1632d" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../_static/documentation_options.js?v=01f34227"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'api/utils';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="instrument.plans" href="plans.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="0.1.0" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
  
    <p class="title logo__title">instrument</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../demo.html">
    Demo: Notebook Startup
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../sessions.html">
    Sessions
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../guides/index.html">
    Guides, how-tos, …
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../install.html">
    Installation
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../logging_config.html">
    Session logging
  </a>
</li>

            <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button"
                data-bs-toggle="dropdown" aria-expanded="false"
                aria-controls="pst-nav-more-links">
                    More
                </button>
                <ul id="pst-nav-more-links" class="dropdown-menu">
                    
<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../license.html">
    Software License
  </a>
</li>


<li class=" current active">
  <a class="nav-link dropdown-item nav-internal" href="index.html">
    API: The Source Code
  </a>
</li>

                </ul>
            </li>
            
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../demo.html">
    Demo: Notebook Startup
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../sessions.html">
    Sessions
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../guides/index.html">
    Guides, how-tos, …
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../install.html">
    Installation
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../logging_config.html">
    Session logging
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../license.html">
    Software License
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="index.html">
    API: The Source Code
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><p aria-level="2" class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="startup.html"><code class="docutils literal notranslate"><span class="pre">instrument.startup</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="callbacks.html"><code class="docutils literal notranslate"><span class="pre">instrument.callbacks</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="configs.html"><code class="docutils literal notranslate"><span class="pre">instrument.configs</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="core.html"><code class="docutils literal notranslate"><span class="pre">instrument.core</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="devices.html"><code class="docutils literal notranslate"><span class="pre">instrument.devices</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="plans.html"><code class="docutils literal notranslate"><span class="pre">instrument.plans</span></code></a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#"><code class="docutils literal notranslate"><span class="pre">instrument.utils</span></code></a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">API: The Source Code</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis"><code class="docutils literal notranslate"><span class="pre">instrument.utils</span></code></span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="instrument-utils">
<span id="api-utils"></span><h1><code class="docutils literal notranslate"><span class="pre">instrument.utils</span></code><a class="headerlink" href="#instrument-utils" title="Link to this heading">#</a></h1>
<p>Add Python modules here that provide any other code not covered by callbacks,
configs, core, devices, or plans.</p>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#module-instrument.utils.aps_functions" title="instrument.utils.aps_functions"><code class="xref py py-obj docutils literal notranslate"><span class="pre">aps_functions</span></code></a></p></td>
<td><p>APS utility helper functions</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#module-instrument.utils.config_loaders" title="instrument.utils.config_loaders"><code class="xref py py-obj docutils literal notranslate"><span class="pre">config_loaders</span></code></a></p></td>
<td><p>Load configuration files</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#module-instrument.utils.controls_setup" title="instrument.utils.controls_setup"><code class="xref py py-obj docutils literal notranslate"><span class="pre">controls_setup</span></code></a></p></td>
<td><p>EPICS &amp; ophyd related setup</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#module-instrument.utils.helper_functions" title="instrument.utils.helper_functions"><code class="xref py py-obj docutils literal notranslate"><span class="pre">helper_functions</span></code></a></p></td>
<td><p>Generic utility helper functions</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#module-instrument.utils.logging_setup" title="instrument.utils.logging_setup"><code class="xref py py-obj docutils literal notranslate"><span class="pre">logging_setup</span></code></a></p></td>
<td><p>Configure logging for this session.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#module-instrument.utils.make_devices_yaml" title="instrument.utils.make_devices_yaml"><code class="xref py py-obj docutils literal notranslate"><span class="pre">make_devices_yaml</span></code></a></p></td>
<td><p>Make devices from YAML files</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#module-instrument.utils.metadata" title="instrument.utils.metadata"><code class="xref py py-obj docutils literal notranslate"><span class="pre">metadata</span></code></a></p></td>
<td><p>RunEngine Metadata</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#module-instrument.utils.stored_dict" title="instrument.utils.stored_dict"><code class="xref py py-obj docutils literal notranslate"><span class="pre">stored_dict</span></code></a></p></td>
<td><p>Storage-backed Dictionary</p></td>
</tr>
</tbody>
</table>
</div>
<section id="aps-utility-helper-functions">
<span id="module-instrument.utils.aps_functions"></span><h2>APS utility helper functions<a class="headerlink" href="#aps-utility-helper-functions" title="Link to this heading">#</a></h2>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#instrument.utils.aps_functions.host_on_aps_subnet" title="instrument.utils.aps_functions.host_on_aps_subnet"><code class="xref py py-obj docutils literal notranslate"><span class="pre">host_on_aps_subnet</span></code></a>()</p></td>
<td><p>Detect if this host is on an APS subnet.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#instrument.utils.aps_functions.aps_dm_setup" title="instrument.utils.aps_functions.aps_dm_setup"><code class="xref py py-obj docutils literal notranslate"><span class="pre">aps_dm_setup</span></code></a>(dm_setup_file)</p></td>
<td><p>APS Data Management setup</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<dl class="py function">
<dt class="sig sig-object py" id="instrument.utils.aps_functions.aps_dm_setup">
<span class="sig-prename descclassname"><span class="pre">instrument.utils.aps_functions.</span></span><span class="sig-name descname"><span class="pre">aps_dm_setup</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dm_setup_file</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/instrument/utils/aps_functions.html#aps_dm_setup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#instrument.utils.aps_functions.aps_dm_setup" title="Link to this definition">#</a></dt>
<dd><section id="aps-data-management-setup">
<h2>APS Data Management setup<a class="headerlink" href="#aps-data-management-setup" title="Link to this heading">#</a></h2>
<p>Read the bash shell script file used by DM to setup the environment. Parse any
<code class="docutils literal notranslate"><span class="pre">export</span></code> lines and add their environment variables to this session.  This is
done by brute force here since the APS DM environment setup requires different
Python code than bluesky and the two often clash.</p>
<p>This setup must be done before any of the DM package libraries are called.</p>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="instrument.utils.aps_functions.host_on_aps_subnet">
<span class="sig-prename descclassname"><span class="pre">instrument.utils.aps_functions.</span></span><span class="sig-name descname"><span class="pre">host_on_aps_subnet</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/instrument/utils/aps_functions.html#host_on_aps_subnet"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#instrument.utils.aps_functions.host_on_aps_subnet" title="Link to this definition">#</a></dt>
<dd><p>Detect if this host is on an APS subnet.</p>
</dd></dl>

<section id="load-configuration-files">
<span id="module-instrument.utils.config_loaders"></span><h2>Load configuration files<a class="headerlink" href="#load-configuration-files" title="Link to this heading">#</a></h2>
<p>Load supported configuration files, such as <code class="docutils literal notranslate"><span class="pre">iconfig.yml</span></code>.</p>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#instrument.utils.config_loaders.load_config_yaml" title="instrument.utils.config_loaders.load_config_yaml"><code class="xref py py-obj docutils literal notranslate"><span class="pre">load_config_yaml</span></code></a>([iconfig_yml])</p></td>
<td><p>Load iconfig.yml (and other YAML) configuration files.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#instrument.utils.config_loaders.IConfigFileVersionError" title="instrument.utils.config_loaders.IConfigFileVersionError"><code class="xref py py-obj docutils literal notranslate"><span class="pre">IConfigFileVersionError</span></code></a></p></td>
<td><p>Configuration file version too old.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<dl class="py exception">
<dt class="sig sig-object py" id="instrument.utils.config_loaders.IConfigFileVersionError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">instrument.utils.config_loaders.</span></span><span class="sig-name descname"><span class="pre">IConfigFileVersionError</span></span><a class="reference internal" href="../_modules/instrument/utils/config_loaders.html#IConfigFileVersionError"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#instrument.utils.config_loaders.IConfigFileVersionError" title="Link to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ValueError</span></code></p>
<p>Configuration file version too old.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="instrument.utils.config_loaders.load_config_yaml">
<span class="sig-prename descclassname"><span class="pre">instrument.utils.config_loaders.</span></span><span class="sig-name descname"><span class="pre">load_config_yaml</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">iconfig_yml</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="reference internal" href="../_modules/instrument/utils/config_loaders.html#load_config_yaml"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#instrument.utils.config_loaders.load_config_yaml" title="Link to this definition">#</a></dt>
<dd><p>Load iconfig.yml (and other YAML) configuration files.</p>
<section id="parameters">
<h2>Parameters<a class="headerlink" href="#parameters" title="Link to this heading">#</a></h2>
<dl class="simple">
<dt>iconfig_yml: str</dt><dd><p>Name of the YAML file to be loaded.  The name can be
absolute or relative to the current working directory.
Default: <code class="docutils literal notranslate"><span class="pre">INSTRUMENT/configs/iconfig.yml</span></code></p>
</dd>
</dl>
</section>
</dd></dl>

<section id="epics-ophyd-related-setup">
<span id="module-instrument.utils.controls_setup"></span><h2>EPICS &amp; ophyd related setup<a class="headerlink" href="#epics-ophyd-related-setup" title="Link to this heading">#</a></h2>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#instrument.utils.controls_setup.oregistry" title="instrument.utils.controls_setup.oregistry"><code class="xref py py-obj docutils literal notranslate"><span class="pre">oregistry</span></code></a></p></td>
<td><p>Registry of all ophyd-style Devices and Signals.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#instrument.utils.controls_setup.set_control_layer" title="instrument.utils.controls_setup.set_control_layer"><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_control_layer</span></code></a>([control_layer])</p></td>
<td><p>Communications library between ophyd and EPICS Channel Access.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#instrument.utils.controls_setup.set_timeouts" title="instrument.utils.controls_setup.set_timeouts"><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_timeouts</span></code></a>()</p></td>
<td><p>Set default timeout for all EpicsSignal connections &amp; communications.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#instrument.utils.controls_setup.epics_scan_id_source" title="instrument.utils.controls_setup.epics_scan_id_source"><code class="xref py py-obj docutils literal notranslate"><span class="pre">epics_scan_id_source</span></code></a>(_md)</p></td>
<td><p>Callback function for RunEngine.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#instrument.utils.controls_setup.connect_scan_id_pv" title="instrument.utils.controls_setup.connect_scan_id_pv"><code class="xref py py-obj docutils literal notranslate"><span class="pre">connect_scan_id_pv</span></code></a>(RE[, pv])</p></td>
<td><p>Define a PV to use for the RunEngine's <cite>scan_id</cite>.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<dl class="py function">
<dt class="sig sig-object py" id="instrument.utils.controls_setup.connect_scan_id_pv">
<span class="sig-prename descclassname"><span class="pre">instrument.utils.controls_setup.</span></span><span class="sig-name descname"><span class="pre">connect_scan_id_pv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">RE</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pv</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/instrument/utils/controls_setup.html#connect_scan_id_pv"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#instrument.utils.controls_setup.connect_scan_id_pv" title="Link to this definition">#</a></dt>
<dd><p>Define a PV to use for the RunEngine’s <cite>scan_id</cite>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="instrument.utils.controls_setup.epics_scan_id_source">
<span class="sig-prename descclassname"><span class="pre">instrument.utils.controls_setup.</span></span><span class="sig-name descname"><span class="pre">epics_scan_id_source</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_md</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/instrument/utils/controls_setup.html#epics_scan_id_source"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#instrument.utils.controls_setup.epics_scan_id_source" title="Link to this definition">#</a></dt>
<dd><p>Callback function for RunEngine.  Returns <em>next</em> scan_id to be used.</p>
<ul class="simple">
<li><p>Ignore metadata dictionary passed as argument.</p></li>
<li><p>Get current scan_id from PV.</p></li>
<li><p>Apply lower limit of zero.</p></li>
<li><p>Increment (so that scan_id numbering starts from 1).</p></li>
<li><p>Set PV with new value.</p></li>
<li><p>Return new value.</p></li>
</ul>
<p>Exception will be raised if PV is not connected when next
<code class="docutils literal notranslate"><span class="pre">bps.open_run()</span></code> is called.</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="instrument.utils.controls_setup.oregistry">
<span class="sig-prename descclassname"><span class="pre">instrument.utils.controls_setup.</span></span><span class="sig-name descname"><span class="pre">oregistry</span></span><a class="headerlink" href="#instrument.utils.controls_setup.oregistry" title="Link to this definition">#</a></dt>
<dd><p>Registry of all ophyd-style Devices and Signals.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="instrument.utils.controls_setup.set_control_layer">
<span class="sig-prename descclassname"><span class="pre">instrument.utils.controls_setup.</span></span><span class="sig-name descname"><span class="pre">set_control_layer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">control_layer</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'PyEpics'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/instrument/utils/controls_setup.html#set_control_layer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#instrument.utils.controls_setup.set_control_layer" title="Link to this definition">#</a></dt>
<dd><p>Communications library between ophyd and EPICS Channel Access.</p>
<p>Choices are: PyEpics (default) or caproto.</p>
<p>OPHYD_CONTROL_LAYER is an application of “lessons learned.”</p>
<p>Only used in a couple rare cases where PyEpics code was failing.
It’s defined here since it was difficult to find how to do this
in the ophyd documentation.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="instrument.utils.controls_setup.set_timeouts">
<span class="sig-prename descclassname"><span class="pre">instrument.utils.controls_setup.</span></span><span class="sig-name descname"><span class="pre">set_timeouts</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/instrument/utils/controls_setup.html#set_timeouts"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#instrument.utils.controls_setup.set_timeouts" title="Link to this definition">#</a></dt>
<dd><p>Set default timeout for all EpicsSignal connections &amp; communications.</p>
</dd></dl>

<section id="generic-utility-helper-functions">
<span id="module-instrument.utils.helper_functions"></span><h2>Generic utility helper functions<a class="headerlink" href="#generic-utility-helper-functions" title="Link to this heading">#</a></h2>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#instrument.utils.helper_functions.register_bluesky_magics" title="instrument.utils.helper_functions.register_bluesky_magics"><code class="xref py py-obj docutils literal notranslate"><span class="pre">register_bluesky_magics</span></code></a>()</p></td>
<td><p>Register Bluesky magics if an IPython environment is detected.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#instrument.utils.helper_functions.running_in_queueserver" title="instrument.utils.helper_functions.running_in_queueserver"><code class="xref py py-obj docutils literal notranslate"><span class="pre">running_in_queueserver</span></code></a>()</p></td>
<td><p>Detect if running in the bluesky queueserver.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#instrument.utils.helper_functions.debug_python" title="instrument.utils.helper_functions.debug_python"><code class="xref py py-obj docutils literal notranslate"><span class="pre">debug_python</span></code></a>()</p></td>
<td><p>Enable detailed debugging for Python exceptions in the IPython environment.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#instrument.utils.helper_functions.mpl_setup" title="instrument.utils.helper_functions.mpl_setup"><code class="xref py py-obj docutils literal notranslate"><span class="pre">mpl_setup</span></code></a>()</p></td>
<td><p>Configure the Matplotlib backend based on the current environment.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#instrument.utils.helper_functions.is_notebook" title="instrument.utils.helper_functions.is_notebook"><code class="xref py py-obj docutils literal notranslate"><span class="pre">is_notebook</span></code></a>()</p></td>
<td><p>Detect if the current environment is a Jupyter Notebook.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<dl class="py function">
<dt class="sig sig-object py" id="instrument.utils.helper_functions.debug_python">
<span class="sig-prename descclassname"><span class="pre">instrument.utils.helper_functions.</span></span><span class="sig-name descname"><span class="pre">debug_python</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/instrument/utils/helper_functions.html#debug_python"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#instrument.utils.helper_functions.debug_python" title="Link to this definition">#</a></dt>
<dd><p>Enable detailed debugging for Python exceptions in the IPython environment.</p>
<dl class="simple">
<dt>This function adjusts the xmode settings for exception tracebacks based on the</dt><dd><p>configuration.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="instrument.utils.helper_functions.is_notebook">
<span class="sig-prename descclassname"><span class="pre">instrument.utils.helper_functions.</span></span><span class="sig-name descname"><span class="pre">is_notebook</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="reference internal" href="../_modules/instrument/utils/helper_functions.html#is_notebook"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#instrument.utils.helper_functions.is_notebook" title="Link to this definition">#</a></dt>
<dd><p>Detect if the current environment is a Jupyter Notebook.</p>
<dl class="simple">
<dt>Returns:</dt><dd><p>bool: True if running in a notebook (Jupyter notebook or qtconsole),
False otherwise.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="instrument.utils.helper_functions.mpl_setup">
<span class="sig-prename descclassname"><span class="pre">instrument.utils.helper_functions.</span></span><span class="sig-name descname"><span class="pre">mpl_setup</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/instrument/utils/helper_functions.html#mpl_setup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#instrument.utils.helper_functions.mpl_setup" title="Link to this definition">#</a></dt>
<dd><p>Configure the Matplotlib backend based on the current environment.</p>
<dl class="simple">
<dt>For non-queueserver and non-notebook environments, attempts to use the ‘qtAgg’</dt><dd><p>backend.</p>
</dd>
<dt>If ‘qtAgg’ is not available due to missing dependencies, falls back to the ‘Agg’</dt><dd><p>backend.</p>
</dd>
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="instrument.utils.helper_functions.register_bluesky_magics">
<span class="sig-prename descclassname"><span class="pre">instrument.utils.helper_functions.</span></span><span class="sig-name descname"><span class="pre">register_bluesky_magics</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/instrument/utils/helper_functions.html#register_bluesky_magics"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#instrument.utils.helper_functions.register_bluesky_magics" title="Link to this definition">#</a></dt>
<dd><p>Register Bluesky magics if an IPython environment is detected.</p>
<dl class="simple">
<dt>This function registers the BlueskyMagics if get_ipython() returns a valid IPython</dt><dd><p>instance.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="instrument.utils.helper_functions.running_in_queueserver">
<span class="sig-prename descclassname"><span class="pre">instrument.utils.helper_functions.</span></span><span class="sig-name descname"><span class="pre">running_in_queueserver</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="reference internal" href="../_modules/instrument/utils/helper_functions.html#running_in_queueserver"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#instrument.utils.helper_functions.running_in_queueserver" title="Link to this definition">#</a></dt>
<dd><p>Detect if running in the bluesky queueserver.</p>
<dl class="simple">
<dt>Returns:</dt><dd><p>bool: True if running in the queueserver, False otherwise.</p>
</dd>
</dl>
</dd></dl>

<p id="module-instrument.utils.logging_setup">Configure logging for this session.</p>
<p class="rubric">Public</p>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#instrument.utils.logging_setup.configure_logging" title="instrument.utils.logging_setup.configure_logging"><code class="xref py py-obj docutils literal notranslate"><span class="pre">configure_logging</span></code></a>()</p></td>
<td><p>Configure logging as described in file.</p></td>
</tr>
</tbody>
</table>
</div>
<p class="rubric">Internal</p>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#instrument.utils.logging_setup._setup_console_logger" title="instrument.utils.logging_setup._setup_console_logger"><code class="xref py py-obj docutils literal notranslate"><span class="pre">_setup_console_logger</span></code></a>(logger, cfg)</p></td>
<td><p>Reconfigure the root logger as configured by the user.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#instrument.utils.logging_setup._setup_file_logger" title="instrument.utils.logging_setup._setup_file_logger"><code class="xref py py-obj docutils literal notranslate"><span class="pre">_setup_file_logger</span></code></a>(logger, cfg)</p></td>
<td><p>Record log messages in file(s).</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#instrument.utils.logging_setup._setup_ipython_logger" title="instrument.utils.logging_setup._setup_ipython_logger"><code class="xref py py-obj docutils literal notranslate"><span class="pre">_setup_ipython_logger</span></code></a>(logger, cfg)</p></td>
<td><p>Internal: Log IPython console session In and Out to a file.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#instrument.utils.logging_setup._setup_module_logging" title="instrument.utils.logging_setup._setup_module_logging"><code class="xref py py-obj docutils literal notranslate"><span class="pre">_setup_module_logging</span></code></a>(cfg)</p></td>
<td><p>Internal: Set logging level for each named module.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference external" href="https://blueskyproject.io/bluesky/main/debugging.html">https://blueskyproject.io/bluesky/main/debugging.html</a></p>
</div>
<dl class="py function">
<dt class="sig sig-object py" id="instrument.utils.logging_setup._setup_console_logger">
<span class="sig-prename descclassname"><span class="pre">instrument.utils.logging_setup.</span></span><span class="sig-name descname"><span class="pre">_setup_console_logger</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">logger</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cfg</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/instrument/utils/logging_setup.html#_setup_console_logger"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#instrument.utils.logging_setup._setup_console_logger" title="Link to this definition">#</a></dt>
<dd><p>Reconfigure the root logger as configured by the user.</p>
<p>We can’t apply user configurations in <code class="docutils literal notranslate"><span class="pre">configure_logging()</span></code> above
because the code to read the config file triggers initialization of
the logging system.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.basicConfig">https://docs.python.org/3/library/logging.html#logging.basicConfig</a></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="instrument.utils.logging_setup._setup_file_logger">
<span class="sig-prename descclassname"><span class="pre">instrument.utils.logging_setup.</span></span><span class="sig-name descname"><span class="pre">_setup_file_logger</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">logger</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cfg</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/instrument/utils/logging_setup.html#_setup_file_logger"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#instrument.utils.logging_setup._setup_file_logger" title="Link to this definition">#</a></dt>
<dd><p>Record log messages in file(s).</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="instrument.utils.logging_setup._setup_ipython_logger">
<span class="sig-prename descclassname"><span class="pre">instrument.utils.logging_setup.</span></span><span class="sig-name descname"><span class="pre">_setup_ipython_logger</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">logger</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cfg</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/instrument/utils/logging_setup.html#_setup_ipython_logger"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#instrument.utils.logging_setup._setup_ipython_logger" title="Link to this definition">#</a></dt>
<dd><p>Internal: Log IPython console session In and Out to a file.</p>
<p>See <code class="docutils literal notranslate"><span class="pre">logrotate?</span></code> int he IPython console for more information.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="instrument.utils.logging_setup._setup_module_logging">
<span class="sig-prename descclassname"><span class="pre">instrument.utils.logging_setup.</span></span><span class="sig-name descname"><span class="pre">_setup_module_logging</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cfg</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/instrument/utils/logging_setup.html#_setup_module_logging"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#instrument.utils.logging_setup._setup_module_logging" title="Link to this definition">#</a></dt>
<dd><p>Internal: Set logging level for each named module.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="instrument.utils.logging_setup.addLoggingLevel">
<span class="sig-prename descclassname"><span class="pre">instrument.utils.logging_setup.</span></span><span class="sig-name descname"><span class="pre">addLoggingLevel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">levelName</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">levelNum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">methodName</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/instrument/utils/logging_setup.html#addLoggingLevel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#instrument.utils.logging_setup.addLoggingLevel" title="Link to this definition">#</a></dt>
<dd><p>Comprehensively adds a new logging level to the <cite>logging</cite> module and the
currently configured logging class.</p>
<p><cite>levelName</cite> becomes an attribute of the <cite>logging</cite> module with the value
<cite>levelNum</cite>. <cite>methodName</cite> becomes a convenience method for both <cite>logging</cite>
itself and the class returned by <cite>logging.getLoggerClass()</cite> (usually just
<cite>logging.Logger</cite>). If <cite>methodName</cite> is not specified, <cite>levelName.lower()</cite> is
used.</p>
<p>To avoid accidental clobberings of existing attributes, this method will
raise an <cite>AttributeError</cite> if the level name is already an attribute of the
<cite>logging</cite> module or if the method name is already present</p>
<section id="example">
<h2>Example<a class="headerlink" href="#example" title="Link to this heading">#</a></h2>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">addLoggingLevel</span><span class="p">(</span><span class="s1">&#39;TRACE&#39;</span><span class="p">,</span> <span class="n">logging</span><span class="o">.</span><span class="n">INFO</span> <span class="o">-</span> <span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="s2">&quot;TEST&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span><span class="o">.</span><span class="n">test</span><span class="p">(</span><span class="s1">&#39;that worked&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logging</span><span class="o">.</span><span class="n">test</span><span class="p">(</span><span class="s1">&#39;so did this&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logging</span><span class="o">.</span><span class="n">TEST</span>
<span class="go">5</span>
</pre></div>
</div>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="instrument.utils.logging_setup.configure_logging">
<span class="sig-prename descclassname"><span class="pre">instrument.utils.logging_setup.</span></span><span class="sig-name descname"><span class="pre">configure_logging</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/instrument/utils/logging_setup.html#configure_logging"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#instrument.utils.logging_setup.configure_logging" title="Link to this definition">#</a></dt>
<dd><p>Configure logging as described in file.</p>
</dd></dl>

<section id="make-devices-from-yaml-files">
<span id="module-instrument.utils.make_devices_yaml"></span><h2>Make devices from YAML files<a class="headerlink" href="#make-devices-from-yaml-files" title="Link to this heading">#</a></h2>
<p>Construct ophyd-style devices from simple specifications in YAML files.</p>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#instrument.utils.make_devices_yaml.make_devices" title="instrument.utils.make_devices_yaml.make_devices"><code class="xref py py-obj docutils literal notranslate"><span class="pre">make_devices</span></code></a></p></td>
<td><p>(plan stub) Create the ophyd-style controls for this instrument.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#instrument.utils.make_devices_yaml.Instrument" title="instrument.utils.make_devices_yaml.Instrument"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Instrument</span></code></a></p></td>
<td><p>Custom YAML loader for guarneri.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<dl class="py class">
<dt class="sig sig-object py" id="instrument.utils.make_devices_yaml.Instrument">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">instrument.utils.make_devices_yaml.</span></span><span class="sig-name descname"><span class="pre">Instrument</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/instrument/utils/make_devices_yaml.html#Instrument"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#instrument.utils.make_devices_yaml.Instrument" title="Link to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Instrument</span></code></p>
<p>Custom YAML loader for guarneri.</p>
<dl class="py method">
<dt class="sig sig-object py" id="instrument.utils.make_devices_yaml.Instrument.parse_yaml_file">
<span class="sig-name descname"><span class="pre">parse_yaml_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/instrument/utils/make_devices_yaml.html#Instrument.parse_yaml_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#instrument.utils.make_devices_yaml.Instrument.parse_yaml_file" title="Link to this definition">#</a></dt>
<dd><p>Read device configurations from YAML format file.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="instrument.utils.make_devices_yaml._loader">
<span class="sig-prename descclassname"><span class="pre">instrument.utils.make_devices_yaml.</span></span><span class="sig-name descname"><span class="pre">_loader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">yaml_device_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">main</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/instrument/utils/make_devices_yaml.html#_loader"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#instrument.utils.make_devices_yaml._loader" title="Link to this definition">#</a></dt>
<dd><p>Load our ophyd-style controls as described in a YAML file.</p>
<p>PARAMETERS</p>
<dl class="simple">
<dt>yaml_device_file<span class="classifier">str or pathlib.Path</span></dt><dd><p>YAML file describing ophyd-style controls to be created.</p>
</dd>
<dt>main<span class="classifier">bool</span></dt><dd><p>If <code class="docutils literal notranslate"><span class="pre">True</span></code> add these devices to the <code class="docutils literal notranslate"><span class="pre">__main__</span></code> namespace.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="instrument.utils.make_devices_yaml.make_devices">
<span class="sig-prename descclassname"><span class="pre">instrument.utils.make_devices_yaml.</span></span><span class="sig-name descname"><span class="pre">make_devices</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pause</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/instrument/utils/make_devices_yaml.html#make_devices"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#instrument.utils.make_devices_yaml.make_devices" title="Link to this definition">#</a></dt>
<dd><p>(plan stub) Create the ophyd-style controls for this instrument.</p>
<p>Feel free to modify this plan to suit the needs of your instrument.</p>
<p>EXAMPLE:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">RE</span><span class="p">(</span><span class="n">make_devices</span><span class="p">())</span>
</pre></div>
</div>
<p>PARAMETERS</p>
<dl class="simple">
<dt>pause<span class="classifier">float</span></dt><dd><p>Wait ‘pause’ seconds (default: 1) for slow objects to connect.</p>
</dd>
</dl>
</dd></dl>

<section id="runengine-metadata">
<span id="module-instrument.utils.metadata"></span><h2>RunEngine Metadata<a class="headerlink" href="#runengine-metadata" title="Link to this heading">#</a></h2>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#instrument.utils.metadata.MD_PATH" title="instrument.utils.metadata.MD_PATH"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MD_PATH</span></code></a></p></td>
<td><p>Storage path to save RE metadata between sessions.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#instrument.utils.metadata.get_md_path" title="instrument.utils.metadata.get_md_path"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_md_path</span></code></a>()</p></td>
<td><p>Get path for RE metadata.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#instrument.utils.metadata.re_metadata" title="instrument.utils.metadata.re_metadata"><code class="xref py py-obj docutils literal notranslate"><span class="pre">re_metadata</span></code></a>([cat])</p></td>
<td><p>Programmatic metadata for the RunEngine.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<dl class="py data">
<dt class="sig sig-object py" id="instrument.utils.metadata.MD_PATH">
<span class="sig-prename descclassname"><span class="pre">instrument.utils.metadata.</span></span><span class="sig-name descname"><span class="pre">MD_PATH</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'.re_md_dict.yml'</span></em><a class="headerlink" href="#instrument.utils.metadata.MD_PATH" title="Link to this definition">#</a></dt>
<dd><p>Storage path to save RE metadata between sessions.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="instrument.utils.metadata.get_md_path">
<span class="sig-prename descclassname"><span class="pre">instrument.utils.metadata.</span></span><span class="sig-name descname"><span class="pre">get_md_path</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/instrument/utils/metadata.html#get_md_path"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#instrument.utils.metadata.get_md_path" title="Link to this definition">#</a></dt>
<dd><p>Get path for RE metadata.</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>support</p></th>
<th class="head"><p>path</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>PersistentDict</p></td>
<td><p>Directory where dictionary keys are stored in separate files.</p></td>
</tr>
<tr class="row-odd"><td><p>StoredDict</p></td>
<td><p>File where dictionary is stored as YAML.</p></td>
</tr>
</tbody>
</table>
</div>
<p>In either case, the ‘path’ can be relative or absolute.  Relative
paths are with respect to the present working directory when the
bluesky session is started.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="instrument.utils.metadata.re_metadata">
<span class="sig-prename descclassname"><span class="pre">instrument.utils.metadata.</span></span><span class="sig-name descname"><span class="pre">re_metadata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cat</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/instrument/utils/metadata.html#re_metadata"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#instrument.utils.metadata.re_metadata" title="Link to this definition">#</a></dt>
<dd><p>Programmatic metadata for the RunEngine.</p>
</dd></dl>

<section id="storage-backed-dictionary">
<span id="module-instrument.utils.stored_dict"></span><h2>Storage-backed Dictionary<a class="headerlink" href="#storage-backed-dictionary" title="Link to this heading">#</a></h2>
<p>A dictionary that writes its contents to YAML file.</p>
<p>Replaces <code class="docutils literal notranslate"><span class="pre">bluesky.utils.PersistentDict</span></code>.</p>
<ul class="simple">
<li><p>Contents must be JSON serializable.</p></li>
<li><p>Contents stored in a single human-readable YAML file.</p></li>
<li><p>Sync to disk shortly after dictionary is updated.</p></li>
</ul>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#instrument.utils.stored_dict.StoredDict" title="instrument.utils.stored_dict.StoredDict"><code class="xref py py-obj docutils literal notranslate"><span class="pre">StoredDict</span></code></a>(file[, delay, title, serializable])</p></td>
<td><p>Dictionary that syncs to storage.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<dl class="py class">
<dt class="sig sig-object py" id="instrument.utils.stored_dict.StoredDict">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">instrument.utils.stored_dict.</span></span><span class="sig-name descname"><span class="pre">StoredDict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delay</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">serializable</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/instrument/utils/stored_dict.html#StoredDict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#instrument.utils.stored_dict.StoredDict" title="Link to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">MutableMapping</span></code></p>
<p>Dictionary that syncs to storage.</p>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#instrument.utils.stored_dict.StoredDict.flush" title="instrument.utils.stored_dict.StoredDict.flush"><code class="xref py py-obj docutils literal notranslate"><span class="pre">flush</span></code></a>()</p></td>
<td><p>Force a write of the dictionary to disk</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#instrument.utils.stored_dict.StoredDict.popitem" title="instrument.utils.stored_dict.StoredDict.popitem"><code class="xref py py-obj docutils literal notranslate"><span class="pre">popitem</span></code></a>()</p></td>
<td><p>Remove and return a (key, value) pair as a 2-tuple.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#instrument.utils.stored_dict.StoredDict.reload" title="instrument.utils.stored_dict.StoredDict.reload"><code class="xref py py-obj docutils literal notranslate"><span class="pre">reload</span></code></a>()</p></td>
<td><p>Read dictionary from storage.</p></td>
</tr>
</tbody>
</table>
</div>
<p class="rubric">Static methods</p>
<p>All support for the YAML format is implemented in the static methods.</p>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#instrument.utils.stored_dict.StoredDict.dump" title="instrument.utils.stored_dict.StoredDict.dump"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dump</span></code></a>(file, contents[, title])</p></td>
<td><p>Write dictionary to YAML file.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#instrument.utils.stored_dict.StoredDict.load" title="instrument.utils.stored_dict.StoredDict.load"><code class="xref py py-obj docutils literal notranslate"><span class="pre">load</span></code></a>(file)</p></td>
<td><p>Read dictionary from YAML file.</p></td>
</tr>
</tbody>
</table>
</div>
<hr class="docutils" />
<dl class="py method">
<dt class="sig sig-object py" id="instrument.utils.stored_dict.StoredDict.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delay</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">serializable</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/instrument/utils/stored_dict.html#StoredDict.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#instrument.utils.stored_dict.StoredDict.__init__" title="Link to this definition">#</a></dt>
<dd><p>StoredDict : Dictionary that syncs to storage</p>
<p>PARAMETERS</p>
<dl class="simple">
<dt>file<span class="classifier">str or pathlib.Path</span></dt><dd><p>Name of file to store dictionary contents.</p>
</dd>
<dt>delay<span class="classifier">number</span></dt><dd><p>Time delay (s) since last dictionary update to write to storage.
Default: 5 seconds.</p>
</dd>
<dt>title<span class="classifier">str or None</span></dt><dd><p>Comment to write at top of file.
Default: “Written by StoredDict.”</p>
</dd>
<dt>serializable<span class="classifier">bool</span></dt><dd><p>If True, validate new dictionary entries are JSON serializable.</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="instrument.utils.stored_dict.StoredDict._abc_impl">
<span class="sig-name descname"><span class="pre">_abc_impl</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;_abc._abc_data</span> <span class="pre">object&gt;</span></em><a class="headerlink" href="#instrument.utils.stored_dict.StoredDict._abc_impl" title="Link to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="instrument.utils.stored_dict.StoredDict._delayed_sync_to_storage">
<span class="sig-name descname"><span class="pre">_delayed_sync_to_storage</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/instrument/utils/stored_dict.html#StoredDict._delayed_sync_to_storage"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#instrument.utils.stored_dict.StoredDict._delayed_sync_to_storage" title="Link to this definition">#</a></dt>
<dd><p>Sync the metadata to storage.</p>
<p>Start a time-delay thread.  New writes to the metadata dictionary will
extend the deadline.  Sync once the deadline is reached.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="instrument.utils.stored_dict.StoredDict.dump">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">dump</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">contents</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/instrument/utils/stored_dict.html#StoredDict.dump"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#instrument.utils.stored_dict.StoredDict.dump" title="Link to this definition">#</a></dt>
<dd><p>Write dictionary to YAML file.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="instrument.utils.stored_dict.StoredDict.flush">
<span class="sig-name descname"><span class="pre">flush</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/instrument/utils/stored_dict.html#StoredDict.flush"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#instrument.utils.stored_dict.StoredDict.flush" title="Link to this definition">#</a></dt>
<dd><p>Force a write of the dictionary to disk</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="instrument.utils.stored_dict.StoredDict.load">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">load</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/instrument/utils/stored_dict.html#StoredDict.load"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#instrument.utils.stored_dict.StoredDict.load" title="Link to this definition">#</a></dt>
<dd><p>Read dictionary from YAML file.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="instrument.utils.stored_dict.StoredDict.popitem">
<span class="sig-name descname"><span class="pre">popitem</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/instrument/utils/stored_dict.html#StoredDict.popitem"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#instrument.utils.stored_dict.StoredDict.popitem" title="Link to this definition">#</a></dt>
<dd><p>Remove and return a (key, value) pair as a 2-tuple.</p>
<p>Pairs are returned in LIFO (last-in, first-out) order.
Raises KeyError if the dict is empty.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="instrument.utils.stored_dict.StoredDict.reload">
<span class="sig-name descname"><span class="pre">reload</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/instrument/utils/stored_dict.html#StoredDict.reload"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#instrument.utils.stored_dict.StoredDict.reload" title="Link to this definition">#</a></dt>
<dd><p>Read dictionary from storage.</p>
</dd></dl>

</dd></dl>

</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="plans.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><code class="docutils literal notranslate"><span class="pre">instrument.plans</span></code></p>
      </div>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#aps-utility-helper-functions">APS utility helper functions</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#instrument.utils.aps_functions.aps_dm_setup"><code class="docutils literal notranslate"><span class="pre">aps_dm_setup()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#instrument.utils.aps_functions.host_on_aps_subnet"><code class="docutils literal notranslate"><span class="pre">host_on_aps_subnet()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#load-configuration-files">Load configuration files</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#instrument.utils.config_loaders.IConfigFileVersionError"><code class="docutils literal notranslate"><span class="pre">IConfigFileVersionError</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#instrument.utils.config_loaders.load_config_yaml"><code class="docutils literal notranslate"><span class="pre">load_config_yaml()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#epics-ophyd-related-setup">EPICS &amp; ophyd related setup</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#instrument.utils.controls_setup.connect_scan_id_pv"><code class="docutils literal notranslate"><span class="pre">connect_scan_id_pv()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#instrument.utils.controls_setup.epics_scan_id_source"><code class="docutils literal notranslate"><span class="pre">epics_scan_id_source()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#instrument.utils.controls_setup.oregistry"><code class="docutils literal notranslate"><span class="pre">oregistry</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#instrument.utils.controls_setup.set_control_layer"><code class="docutils literal notranslate"><span class="pre">set_control_layer()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#instrument.utils.controls_setup.set_timeouts"><code class="docutils literal notranslate"><span class="pre">set_timeouts()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#generic-utility-helper-functions">Generic utility helper functions</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#instrument.utils.helper_functions.debug_python"><code class="docutils literal notranslate"><span class="pre">debug_python()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#instrument.utils.helper_functions.is_notebook"><code class="docutils literal notranslate"><span class="pre">is_notebook()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#instrument.utils.helper_functions.mpl_setup"><code class="docutils literal notranslate"><span class="pre">mpl_setup()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#instrument.utils.helper_functions.register_bluesky_magics"><code class="docutils literal notranslate"><span class="pre">register_bluesky_magics()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#instrument.utils.helper_functions.running_in_queueserver"><code class="docutils literal notranslate"><span class="pre">running_in_queueserver()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#instrument.utils.logging_setup._setup_console_logger"><code class="docutils literal notranslate"><span class="pre">_setup_console_logger()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#instrument.utils.logging_setup._setup_file_logger"><code class="docutils literal notranslate"><span class="pre">_setup_file_logger()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#instrument.utils.logging_setup._setup_ipython_logger"><code class="docutils literal notranslate"><span class="pre">_setup_ipython_logger()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#instrument.utils.logging_setup._setup_module_logging"><code class="docutils literal notranslate"><span class="pre">_setup_module_logging()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#instrument.utils.logging_setup.addLoggingLevel"><code class="docutils literal notranslate"><span class="pre">addLoggingLevel()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#instrument.utils.logging_setup.configure_logging"><code class="docutils literal notranslate"><span class="pre">configure_logging()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#make-devices-from-yaml-files">Make devices from YAML files</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#instrument.utils.make_devices_yaml.Instrument"><code class="docutils literal notranslate"><span class="pre">Instrument</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#instrument.utils.make_devices_yaml.Instrument.parse_yaml_file"><code class="docutils literal notranslate"><span class="pre">Instrument.parse_yaml_file()</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#instrument.utils.make_devices_yaml._loader"><code class="docutils literal notranslate"><span class="pre">_loader()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#instrument.utils.make_devices_yaml.make_devices"><code class="docutils literal notranslate"><span class="pre">make_devices()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#runengine-metadata">RunEngine Metadata</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#instrument.utils.metadata.MD_PATH"><code class="docutils literal notranslate"><span class="pre">MD_PATH</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#instrument.utils.metadata.get_md_path"><code class="docutils literal notranslate"><span class="pre">get_md_path()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#instrument.utils.metadata.re_metadata"><code class="docutils literal notranslate"><span class="pre">re_metadata()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#storage-backed-dictionary">Storage-backed Dictionary</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#instrument.utils.stored_dict.StoredDict"><code class="docutils literal notranslate"><span class="pre">StoredDict</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#instrument.utils.stored_dict.StoredDict.__init__"><code class="docutils literal notranslate"><span class="pre">StoredDict.__init__()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#instrument.utils.stored_dict.StoredDict._abc_impl"><code class="docutils literal notranslate"><span class="pre">StoredDict._abc_impl</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#instrument.utils.stored_dict.StoredDict._delayed_sync_to_storage"><code class="docutils literal notranslate"><span class="pre">StoredDict._delayed_sync_to_storage()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#instrument.utils.stored_dict.StoredDict.dump"><code class="docutils literal notranslate"><span class="pre">StoredDict.dump()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#instrument.utils.stored_dict.StoredDict.flush"><code class="docutils literal notranslate"><span class="pre">StoredDict.flush()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#instrument.utils.stored_dict.StoredDict.load"><code class="docutils literal notranslate"><span class="pre">StoredDict.load()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#instrument.utils.stored_dict.StoredDict.popitem"><code class="docutils literal notranslate"><span class="pre">StoredDict.popitem()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#instrument.utils.stored_dict.StoredDict.reload"><code class="docutils literal notranslate"><span class="pre">StoredDict.reload()</span></code></a></li>
</ul>
</li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/api/utils.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2023-2025, APS BCDA.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>